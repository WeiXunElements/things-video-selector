<!--
@license
Copyright Â© 2015-2021 Shenzhen Weixun All rights reserved.
-->
<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html" />

<dom-module id="things-common-video-player">
  <template>
    <style>
      :host {
        display: block;
        @apply (--layout-vertical);
        @apply (--layout-flex);
      }

      video {
        @apply (--layout-flex);
      }
    </style>

    <video id="the-video" autoplay="[[autoplay]]" loop="[[loop]]" controls="[[controls]]" title="[[title]]">
      <source src="[[videoUrl]]" type="video/mp4" />
    </video>
  </template>

  <script>
    Polymer({
      is: "things-common-video-player",

      behaviors: [Polymer.IronResizableBehavior],

      properties: {
        /**
         * Video AutoPlay
         * *******
         * @type {Boolean}
         */
        autoplay: {
          type: Boolean,
          value: false,
        },

        /**
         * Video Loop
         * *******
         * @type {Boolean}
         */
        loop: {
          type: Boolean,
          value: false,
        },

        /**
         * Video Controls
         * ******
         * @type {Boolean}
         */
        controls: {
          type: Boolean,
          value: true,
        },

        /**
         * Title
         * ******
         * @type {String}
         */
        title: {
          type: String,
        },

        /**
         * Video URL
         * ******
         * @type {String}
         */
        videoUrl: {
          type: String,
        },
      },

      listeners: {
        "iron-resize": "_handleResize",
      },

      /**
       * Resize Handler
       */
      _handleResize: function (e) {
        if (this.parentElement.offsetHeight > 0) {
          var videoContainer = this.$["the-video"];
          videoContainer.style.height = this.parentElement.offsetHeight + "px";
          videoContainer.style.width = this.parentElement.offsetWidth + "px";
        }
      },
    });
  </script>
</dom-module>
